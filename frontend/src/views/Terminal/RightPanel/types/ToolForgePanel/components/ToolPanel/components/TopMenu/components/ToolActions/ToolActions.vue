<template>
  <div class="action-items">
    <div class="left-actions">
      <ToolGenerator @tool-generated="onToolGenerated"></ToolGenerator>
      <Tooltip text="Import Tool Template" width="auto">
        <button class="icon" @click="importTemplate">
          <svg xmlns="http://www.w3.org/2000/svg" width="33" height="30" viewBox="0 0 33 30" fill="none">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M20.3649 14.0389C20.2042 13.8783 19.9864 13.7882 19.7592 13.7882C19.5321 13.7882 19.3142 13.8783 19.1535 14.0389L16.9021 16.2903V7.85714C16.9021 7.62981 16.8118 7.4118 16.651 7.25105C16.4903 7.09031 16.2723 7 16.0449 7C15.8176 7 15.5996 7.09031 15.4388 7.25105C15.2781 7.4118 15.1878 7.62981 15.1878 7.85714V16.2903L12.9364 14.0389C12.7739 13.8875 12.559 13.805 12.3369 13.8089C12.1148 13.8129 11.903 13.9028 11.7459 14.0599C11.5889 14.2169 11.4989 14.4288 11.495 14.6508C11.4911 14.8729 11.5735 15.0878 11.7249 15.2503L15.4392 18.9646L16.0449 19.5714L16.6506 18.9657L20.3649 15.2514C20.4446 15.1718 20.5078 15.0773 20.5509 14.9733C20.594 14.8693 20.6162 14.7578 20.6162 14.6451C20.6162 14.5325 20.594 14.421 20.5509 14.317C20.5078 14.213 20.4446 14.1185 20.3649 14.0389ZM9.75921 17C9.75921 16.8874 9.73704 16.776 9.69396 16.672C9.65089 16.568 9.58775 16.4735 9.50816 16.3939C9.42856 16.3143 9.33407 16.2512 9.23008 16.2081C9.12609 16.165 9.01463 16.1429 8.90206 16.1429C8.7895 16.1429 8.67804 16.165 8.57405 16.2081C8.47006 16.2512 8.37557 16.3143 8.29597 16.3939C8.21638 16.4735 8.15324 16.568 8.11017 16.672C8.06709 16.776 8.04492 16.8874 8.04492 17V20.7143C8.04492 21.3205 8.28574 21.9019 8.71439 22.3305C9.14305 22.7592 9.72443 23 10.3306 23H21.7592C22.3654 23 22.9468 22.7592 23.3755 22.3305C23.8041 21.9019 24.0449 21.3205 24.0449 20.7143V17C24.0449 16.7727 23.9546 16.5547 23.7939 16.3939C23.6331 16.2332 23.4151 16.1429 23.1878 16.1429C22.9605 16.1429 22.7424 16.2332 22.5817 16.3939C22.4209 16.5547 22.3306 16.7727 22.3306 17V20.7143C22.3306 20.8658 22.2704 21.0112 22.1633 21.1183C22.0561 21.2255 21.9108 21.2857 21.7592 21.2857H10.3306C10.1791 21.2857 10.0337 21.2255 9.92658 21.1183C9.81941 21.0112 9.75921 20.8658 9.75921 20.7143V17Z"
              fill="#01052A"
              fill-opacity="0.75"
            />
          </svg>
        </button>
      </Tooltip>
      <Tooltip text="Share Tool Template" width="auto">
        <button class="icon" @click="shareTemplate">
          <svg xmlns="http://www.w3.org/2000/svg" width="31" height="30" viewBox="0 0 31 30" fill="none">
            <path
              d="M19.7116 23C19.0634 23 18.5125 22.7667 18.0588 22.3C17.6051 21.8333 17.3783 21.2667 17.3783 20.6C17.3783 20.5067 17.3847 20.4099 17.3977 20.3096C17.4107 20.2093 17.4301 20.1195 17.456 20.04L11.9727 16.76C11.7523 16.96 11.506 17.1168 11.2338 17.2304C10.9616 17.344 10.6764 17.4005 10.3783 17.4C9.73011 17.4 9.17918 17.1667 8.72548 16.7C8.27177 16.2333 8.04492 15.6667 8.04492 15C8.04492 14.3333 8.27177 13.7667 8.72548 13.3C9.17918 12.8333 9.73011 12.6 10.3783 12.6C10.6764 12.6 10.9616 12.6568 11.2338 12.7704C11.506 12.884 11.7523 13.0405 11.9727 13.24L17.456 9.96C17.4301 9.88 17.4107 9.79013 17.3977 9.6904C17.3847 9.59067 17.3783 9.49387 17.3783 9.4C17.3783 8.73333 17.6051 8.16667 18.0588 7.7C18.5125 7.23333 19.0634 7 19.7116 7C20.3597 7 20.9107 7.23333 21.3644 7.7C21.8181 8.16667 22.0449 8.73333 22.0449 9.4C22.0449 10.0667 21.8181 10.6333 21.3644 11.1C20.9107 11.5667 20.3597 11.8 19.7116 11.8C19.4134 11.8 19.1283 11.7435 18.856 11.6304C18.5838 11.5173 18.3375 11.3605 18.1171 11.16L12.6338 14.44C12.6597 14.52 12.6792 14.6101 12.6921 14.7104C12.7051 14.8107 12.7116 14.9072 12.7116 15C12.7116 15.0933 12.7051 15.1901 12.6921 15.2904C12.6792 15.3907 12.6597 15.4805 12.6338 15.56L18.1171 18.84C18.3375 18.64 18.5838 18.4835 18.856 18.3704C19.1283 18.2573 19.4134 18.2005 19.7116 18.2C20.3597 18.2 20.9107 18.4333 21.3644 18.9C21.8181 19.3667 22.0449 19.9333 22.0449 20.6C22.0449 21.2667 21.8181 21.8333 21.3644 22.3C20.9107 22.7667 20.3597 23 19.7116 23Z"
              fill="#01052A"
              fill-opacity="0.75"
            />
          </svg>
        </button>
      </Tooltip>
    </div>
    <div class="right-actions">
      <Tooltip text="Save Tool Template" width="auto">
        <button id="save-template" class="icon" @click="saveFormDataToDB">
          <svg xmlns="http://www.w3.org/2000/svg" width="31" height="30" viewBox="0 0 31 30" fill="none">
            <path
              d="M22.0449 11.1111V20.4444C22.0449 20.8722 21.8925 21.2386 21.5876 21.5434C21.2827 21.8483 20.9166 22.0005 20.4894 22H9.60048C9.1727 22 8.80637 21.8476 8.50148 21.5427C8.19659 21.2378 8.0444 20.8717 8.04492 20.4444V9.55556C8.04492 9.12778 8.19737 8.76145 8.50226 8.45656C8.80715 8.15167 9.17322 7.99948 9.60048 8H18.9338L22.0449 11.1111ZM15.0449 19.6667C15.6931 19.6667 16.244 19.4398 16.6977 18.9861C17.1514 18.5324 17.3783 17.9815 17.3783 17.3333C17.3783 16.6852 17.1514 16.1343 16.6977 15.6806C16.244 15.2269 15.6931 15 15.0449 15C14.3968 15 13.8458 15.2269 13.3921 15.6806C12.9384 16.1343 12.7116 16.6852 12.7116 17.3333C12.7116 17.9815 12.9384 18.5324 13.3921 18.9861C13.8458 19.4398 14.3968 19.6667 15.0449 19.6667ZM10.3783 13.4444H17.3783V10.3333H10.3783V13.4444Z"
              fill="#01052A"
              fill-opacity="0.75"
            />
          </svg>
        </button>
      </Tooltip>
      <Tooltip text="Clear Fields" width="auto">
        <button class="icon" @click="clearFields">
          <svg xmlns="http://www.w3.org/2000/svg" width="31" height="30" viewBox="0 0 31 30" fill="none">
            <path
              d="M15.0449 8C12.4199 8 10.1449 9.4 9.00742 11.5875L8.04492 10.625V14.125H11.5449L10.2324 12.8125C11.1074 11.0625 12.9449 9.75 15.0449 9.75C17.9324 9.75 20.2949 12.1125 20.2949 15C20.2949 17.8875 17.9324 20.25 15.0449 20.25C13.4699 20.25 12.0699 19.55 11.1074 18.4125L9.79492 19.55C11.0199 21.0375 12.9449 22 15.0449 22C18.8949 22 22.0449 18.85 22.0449 15C22.0449 11.15 18.8949 8 15.0449 8Z"
              fill="#01052A"
              fill-opacity="0.75"
            />
          </svg>
        </button>
      </Tooltip>
      <Tooltip text="Delete Tool Template" width="auto">
        <button class="icon" @click="confirmDelete">
          <svg xmlns="http://www.w3.org/2000/svg" width="31" height="30" viewBox="0 0 31 30" fill="none">
            <path
              d="M9.90206 20.4444C9.90206 21.3 10.6735 22 11.6164 22H18.4735C19.4164 22 20.1878 21.3 20.1878 20.4444V11.1111H9.90206V20.4444ZM12.0106 14.9067L13.2192 13.81L15.0449 15.4589L16.8621 13.81L18.0706 14.9067L16.2535 16.5556L18.0706 18.2044L16.8621 19.3011L15.0449 17.6522L13.2278 19.3011L12.0192 18.2044L13.8364 16.5556L12.0106 14.9067ZM18.0449 8.77778L17.1878 8H12.9021L12.0449 8.77778H9.04492V10.3333H21.0449V8.77778H18.0449Z"
              fill="#01052A"
              fill-opacity="0.75"
            />
          </svg>
        </button>
      </Tooltip>
    </div>
  </div>
</template>

<script>
import { defineComponent } from 'vue';
import ToolGenerator from './components/GenerateTool/GenerateTool.vue';
import Tooltip from '@/views/Terminal/_components/Tooltip.vue';
import { useToolActions } from './useToolActions';

export default defineComponent({
  name: 'ToolActions',
  components: {
    ToolGenerator,
    Tooltip,
  },
  setup() {
    const { saveFormDataToDB, confirmDelete, importTemplate, shareTemplate, clearFields, onToolGenerated, selectedTemplate, formData } =
      useToolActions();

    return {
      saveFormDataToDB,
      confirmDelete,
      importTemplate,
      shareTemplate,
      clearFields,
      onToolGenerated,
      selectedTemplate,
      formData,
    };
  },
});
</script>

<style>
.action-items {
  position: relative;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  align-content: flex-start;
  justify-content: space-between;
  width: 100%;
  height: 32px;
}
</style>
