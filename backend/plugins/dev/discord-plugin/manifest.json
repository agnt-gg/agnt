{
  "name": "discord-plugin",
  "version": "1.3.0",
  "description": "Discord integration plugin for AGNT - Send messages, manage roles, receive messages, and interact with Discord servers",
  "author": "AGNT",
  "icon": "discord",
  "tools": [
    {
      "type": "discord-api",
      "entryPoint": "./discord-api.js",
      "schema": {
        "title": "Discord API",
        "category": "action",
        "type": "discord-api",
        "icon": "discord",
        "description": "Interact with Discord to perform various operations such as sending messages, managing roles, and uploading files.",
        "authRequired": "apiKey",
        "authProvider": "discord",
        "parameters": {
          "action": {
            "type": "string",
            "inputType": "select",
            "options": ["SEND_MESSAGE", "ASSIGN_ROLE", "GET_MEMBERS", "UPLOAD_FILE", "BAN_MEMBER"],
            "description": "The action to perform on Discord"
          },
          "channelId": {
            "type": "string",
            "inputType": "text",
            "description": "The ID of the Discord channel (for SEND_MESSAGE and UPLOAD_FILE actions)",
            "conditional": {
              "field": "action",
              "value": ["SEND_MESSAGE", "UPLOAD_FILE"]
            }
          },
          "message": {
            "type": "string",
            "inputType": "textarea",
            "description": "The message to send (for SEND_MESSAGE action)",
            "conditional": {
              "field": "action",
              "value": ["SEND_MESSAGE", "UPLOAD_FILE"]
            }
          },
          "guildId": {
            "type": "string",
            "inputType": "text",
            "description": "The ID of the Discord guild (server) (for ASSIGN_ROLE and GET_MEMBERS actions)",
            "conditional": {
              "field": "action",
              "value": ["ASSIGN_ROLE", "GET_MEMBERS", "BAN_MEMBER"]
            }
          },
          "roleId": {
            "type": "string",
            "inputType": "text",
            "description": "The ID of the role to assign (for ASSIGN_ROLE action)",
            "conditional": {
              "field": "action",
              "value": "ASSIGN_ROLE"
            }
          },
          "memberIds": {
            "type": "string",
            "inputType": "textarea",
            "description": "Comma-separated list of member IDs to assign the role to (for ASSIGN_ROLE action)",
            "conditional": {
              "field": "action",
              "value": "ASSIGN_ROLE"
            }
          },
          "fileName": {
            "type": "string",
            "inputType": "text",
            "description": "The name of the file to upload (for UPLOAD_FILE action)",
            "conditional": {
              "field": "action",
              "value": "UPLOAD_FILE"
            }
          },
          "fileData": {
            "type": "string",
            "inputType": "textarea",
            "description": "The base64-encoded file data to upload (for UPLOAD_FILE action)",
            "conditional": {
              "field": "action",
              "value": "UPLOAD_FILE"
            }
          },
          "includeAvatarMeta": {
            "type": "boolean",
            "inputType": "checkbox",
            "description": "When true, include the raw Discord avatar hash and a resolved CDN URL for each member (for GET_MEMBERS action)",
            "conditional": {
              "field": "action",
              "value": "GET_MEMBERS"
            }
          },
          "includeGlobalProfile": {
            "type": "boolean",
            "inputType": "checkbox",
            "description": "When true, include discriminator, global name, banner hash, and other global profile metadata (for GET_MEMBERS action)",
            "conditional": {
              "field": "action",
              "value": "GET_MEMBERS"
            }
          },
          "trackRoles": {
            "type": "array",
            "inputType": "textarea",
            "description": "Optional list of role IDs to flag members with an isTracked indicator (comma-separated for GET_MEMBERS action)",
            "conditional": {
              "field": "action",
              "value": "GET_MEMBERS"
            }
          },
          "hashFields": {
            "type": "array",
            "inputType": "textarea",
            "description": "Optional list of member field names to hash (comma-separated) for audit comparisons (for GET_MEMBERS action)",
            "conditional": {
              "field": "action",
              "value": "GET_MEMBERS"
            }
          },
          "targetUserId": {
            "type": "string",
            "inputType": "text",
            "description": "The ID of the user to ban (for BAN_MEMBER action)",
            "conditional": {
              "field": "action",
              "value": "BAN_MEMBER"
            }
          },
          "banReason": {
            "type": "string",
            "inputType": "textarea",
            "description": "Optional audit log reason for the ban (for BAN_MEMBER action)",
            "conditional": {
              "field": "action",
              "value": "BAN_MEMBER"
            }
          },
          "deleteMessageDays": {
            "type": "number",
            "inputType": "number",
            "description": "Number of days of messages to delete (0-7) when banning the user (for BAN_MEMBER action)",
            "conditional": {
              "field": "action",
              "value": "BAN_MEMBER"
            }
          }
        },
        "outputs": {
          "success": {
            "type": "boolean",
            "description": "Indicates whether the Discord operation was successful"
          },
          "result": {
            "type": "object",
            "description": "The result of the Discord operation"
          },
          "error": {
            "type": "string",
            "description": "Error message if the Discord operation failed"
          }
        }
      }
    },
    {
      "type": "receive-discord-message",
      "entryPoint": "./discord-receiver.js",
      "schema": {
        "title": "Receive Discord Message",
        "category": "trigger",
        "type": "receive-discord-message",
        "icon": "discord",
        "description": "Listen for incoming Discord messages in a specified channel and trigger the workflow when a new message is received.",
        "authRequired": "apiKey",
        "authProvider": "discord",
        "parameters": {
          "channelId": {
            "type": "string",
            "inputType": "text",
            "description": "The ID of the Discord channel to monitor"
          }
        },
        "outputs": {
          "content": {
            "type": "string",
            "description": "The content of the message"
          },
          "author": {
            "type": "string",
            "description": "The username of the message author"
          },
          "username": {
            "type": "string",
            "description": "The display username of the author"
          },
          "avatarUrl": {
            "type": "string",
            "description": "The avatar URL of the message author"
          },
          "authorId": {
            "type": "string",
            "description": "The ID of the message author"
          },
          "channelId": {
            "type": "string",
            "description": "The ID of the channel where the message was sent"
          },
          "guildId": {
            "type": "string",
            "description": "The ID of the Discord server (guild)"
          },
          "timestamp": {
            "type": "number",
            "description": "The timestamp of when the message was created"
          },
          "attachments": {
            "type": "array",
            "description": "Array of file attachments on the message"
          },
          "response": {
            "type": "object",
            "description": "The complete raw message data"
          }
        }
      }
    }
  ]
}
