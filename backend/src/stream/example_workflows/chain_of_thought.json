{
  "id": "92bd0bf8-509c-43be-9683-f08202a97ee3",
  "name": "Chain of Thought",
  "nodes": [
    {
      "id": "a4139e63-2ad6-4479-b116-bfeb091b6eb7",
      "text": "LLM Call Agent",
      "x": 640,
      "y": 48,
      "isEditing": false,
      "type": "generate-with-ai-llm",
      "icon": "magic",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "provider": "Anthropic",
        "model": "claude-3-5-sonnet-20240620",
        "prompt": "You are an expert AI assistant tasked with generating and iteratively improving responses to user queries. Your goal is to provide accurate, helpful, and nuanced answers that address all aspects of the user's question.\n\nProcess:\n- Carefully analyze the user's query, identifying the key points and any implicit questions or needs.\n- Generate an initial response that aims to fully address the query.\n- Review any critique provided by the Critic agent, if any.\n- Thoughtfully consider how to incorporate the Critic's feedback to improve your response. \n\nThis may involve:\n-Adding more detail or context\n-Clarifying ambiguous points\n-Addressing overlooked aspects of the query\n-Improving the structure or flow of your response\n-Fact-checking and correcting any errors\n-Revise and refine your response based on the critique.\n-Output only your improved response, without any meta-commentary.\n-Remember to maintain a helpful and friendly tone throughout your response. Strive for clarity, accuracy, and comprehensiveness.\n\nITERATION: {{countIterations.result.count}}\n\nORIGINAL RESPONSE:\n{{lLMCallAgent.generatedText}}\n\nCRITIQUE:\n{{lLMCallCritic.generatedText}}\n\nUSER QUERY:\n{{receiveSlackMessage.text}}\n\nReturn with ONLY your final response, with absolutely NO additional text or explanation.",
        "maxTokens": "1000",
        "temperature": "0"
      },
      "description": "This action node uses a large language model (LLM) to generate text based on a given prompt or input. Returns a generated text string & final token count integer.",
      "error": null,
      "outputs": { "generatedText": "", "tokenCount": 0, "error": "" },
      "isActive": false,
      "output": null
    },
    {
      "id": "8c300bcb-4c0e-4b49-8287-8b806b997279",
      "text": "Receive Slack Message",
      "x": 320,
      "y": 112,
      "isEditing": false,
      "type": "receive-slack-message",
      "icon": "slack-receive",
      "category": "trigger",
      "isSelected": false,
      "parameters": { "channelId": "C07KKR1GW07" },
      "description": "This trigger node listens for incoming Slack messages in a specified channel and triggers the workflow when a new message is received.",
      "error": null,
      "outputs": { "user": "", "text": "", "timestamp": "" },
      "isActive": false,
      "output": null
    },
    {
      "id": "24fed7c8-2e01-4288-9a0e-9313a6645be4",
      "text": "LLM Call Critic",
      "x": 960,
      "y": 192,
      "isEditing": false,
      "type": "generate-with-ai-llm",
      "icon": "magic",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "provider": "Anthropic",
        "model": "claude-3-5-sonnet-20240620",
        "prompt": "You are an expert critic tasked with analyzing and providing constructive feedback on responses to user queries. Your goal is to help improve the accuracy, completeness, and overall quality of the responses.\n\nProcess:\n-Carefully read both the original user query and the response provided by Agent 1.\n-Analyze the response for the following aspects:\n-Accuracy of information\n-Completeness in addressing all parts of the query\n-Clarity and coherence of explanation\n-Appropriate level of detail\n-Logical flow and structure\n-Tone and helpfulness\n-Identify specific areas for improvement, such as:\n-Missing information or unexplored aspects of the query\n-Factual errors or misconceptions\n-Unclear or ambiguous statements\n-Opportunities to provide more context or examples\n-Ways to enhance the overall structure or presentation\n-Formulate clear, actionable suggestions for how Agent 1 can improve the response.\n-Output only your critique and suggestions, without repeating the original response or query.\n-Provide specific, constructive feedback that will guide Agent 1 in refining and enhancing their response. \n-Be thorough in your analysis but concise in your suggestions.\n\nITERATION: {{countIterations.result.count}}\n\nORIGINAL USER QUERY:\n{{receiveSlackMessage.text}}\n\nORIGINAL RESPONSE\n{{lLMCallAgent.generatedText}}\n\nReturn with ONLY your final critiques, that will be sent to the creator agent, allowing them to improve their work.",
        "maxTokens": "1000",
        "temperature": "1"
      },
      "description": "This action node uses a large language model (LLM) to generate text based on a given prompt or input. Returns a generated text string & final token count integer.",
      "error": null,
      "outputs": { "generatedText": "", "tokenCount": 0, "error": "" },
      "isActive": false,
      "output": null
    },
    {
      "id": "34c32b05-6e13-4fe7-9b53-b8ebec69980d",
      "text": "Send Slack Message",
      "x": 1280,
      "y": 256,
      "isEditing": false,
      "type": "send-slack-message",
      "icon": "slack-send",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "channelId": "C07KKR1GW07",
        "message": "ITERATIONS:\nThought {{countIterations.result.count}} iterations about this solution.\n\nRESULT:\n{{lLMCallAgent.generatedText}}"
      },
      "description": "This action node sends a message to a specified Slack channel.",
      "error": null,
      "outputs": { "success": false, "timestamp": "", "error": "" },
      "isActive": false,
      "output": null
    },
    {
      "id": "a3068e53-d243-45c6-8397-3b6ec012b345",
      "text": "Count Iterations",
      "x": 640,
      "y": 112,
      "isEditing": false,
      "type": "execute-javascript",
      "icon": "javascript",
      "category": "utility",
      "isSelected": false,
      "parameters": {
        "code": "let count = 0;\ntry {\n  count = parseInt({{countIterations.result.count}}) || 0;\n} catch (error) {\n  console.error(\"Error parsing previous count:\", error);\n}\ncount++;\nreturn { count };"
      },
      "description": "This utility node allows you to execute custom JavaScript code within the workflow, enabling advanced logic and data transformations.",
      "error": null,
      "outputs": { "result": null, "error": "" },
      "isActive": false,
      "output": null
    },
    {
      "id": "f69a2e35-0658-4a7e-9777-ae459869a1c2",
      "text": "Google Sheets",
      "x": 1280,
      "y": 128,
      "isEditing": false,
      "type": "google-sheets-api",
      "icon": "table",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "operation": "Append",
        "spreadsheetId": "1fAiyiXAe0DTftqkx_mJK9khNd-4mojF5OeHshAD-L3E",
        "range": "ThinkingLog",
        "values": "[{{lLMCallAgent.generatedText}}, {{lLMCallCritic.generatedText}}]"
      },
      "description": "This action node interacts with Google Sheets to read, write or modify data in a spreadsheet.",
      "error": null,
      "isActive": false,
      "output": null,
      "outputs": { "success": false, "result": [], "error": "" }
    }
  ],
  "edges": [
    {
      "id": "08141bcd-9b93-4181-872a-364d50a2e34f",
      "start": {
        "id": "a4139e63-2ad6-4479-b116-bfeb091b6eb7",
        "type": "output"
      },
      "end": { "id": "24fed7c8-2e01-4288-9a0e-9313a6645be4", "type": "input" },
      "startX": 928,
      "startY": 72,
      "endX": 960,
      "endY": 216
    },
    {
      "id": "50798ae9-ed2d-40be-b524-5953b4bdad06",
      "start": {
        "id": "24fed7c8-2e01-4288-9a0e-9313a6645be4",
        "type": "output"
      },
      "end": { "id": "34c32b05-6e13-4fe7-9b53-b8ebec69980d", "type": "input" },
      "startX": 1248,
      "startY": 216,
      "endX": 1280,
      "endY": 280,
      "if": "{{countIterations.result.count}}",
      "condition": "greater_than",
      "value": 4
    },
    {
      "id": "b5b1b43a-e429-4416-8d79-43555d9f54eb",
      "start": {
        "id": "8c300bcb-4c0e-4b49-8287-8b806b997279",
        "type": "output"
      },
      "end": { "id": "a3068e53-d243-45c6-8397-3b6ec012b345", "type": "input" },
      "startX": 608,
      "startY": 136,
      "endX": 640,
      "endY": 136
    },
    {
      "id": "b765551c-41bb-44c3-9ec7-20feb7469e64",
      "start": {
        "id": "a3068e53-d243-45c6-8397-3b6ec012b345",
        "type": "output"
      },
      "end": { "id": "a4139e63-2ad6-4479-b116-bfeb091b6eb7", "type": "input" },
      "startX": 928,
      "startY": 136,
      "endX": 640,
      "endY": 72
    },
    {
      "id": "4fda02b2-f48a-4669-8bd7-025d3d740930",
      "start": {
        "id": "24fed7c8-2e01-4288-9a0e-9313a6645be4",
        "type": "output"
      },
      "end": { "id": "a3068e53-d243-45c6-8397-3b6ec012b345", "type": "input" },
      "startX": 1248,
      "startY": 216,
      "endX": 640,
      "endY": 136,
      "maxIterations": "4"
    },
    {
      "id": "b457220f-494e-4923-bbb7-0fdb13e11842",
      "start": {
        "id": "24fed7c8-2e01-4288-9a0e-9313a6645be4",
        "type": "output"
      },
      "end": { "id": "f69a2e35-0658-4a7e-9777-ae459869a1c2", "type": "input" },
      "startX": 1248,
      "startY": 216,
      "endX": 1280,
      "endY": 152
    }
  ],
  "zoomLevel": 1,
  "canvasOffsetX": -56,
  "canvasOffsetY": 282,
  "isTinyNodeMode": false
}
