{
  "id": "eedb4641-a8b5-45d7-8d6b-b0021548750a",
  "name": "Customer Support System",
  "nodes": [
    {
      "id": "receiveCustomerEmail",
      "text": "Receive Customer Email",
      "x": 240,
      "y": 128,
      "isEditing": false,
      "type": "receive-email",
      "icon": "inbox",
      "category": "trigger",
      "isSelected": false,
      "parameters": { "emailAddress": "" },
      "description": "This trigger node listens for incoming emails and triggers the workflow when a new email is received. Returns the received email details like from address, subject, body, etc.",
      "outputs": { "from": "", "subject": "", "body": "", "attachments": [] }
    },
    {
      "id": "analyzeEmailContent",
      "text": "Analyze Email Content",
      "x": 240,
      "y": 208,
      "isEditing": false,
      "type": "generate-with-ai-llm",
      "icon": "magic",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "provider": "Anthropic",
        "model": "claude-3-haiku-20240307",
        "prompt": "Analyze the following customer support email and return a JSON object with the following properties: \ncategory (e.g., 'Technical', 'Billing', 'Product Inquiry'), \npriority (1-5, where 1 is highest), \nand a brief summary (max 50 words).\n\nExample:\n{\ncategory: \"Technical\",\npriority: 2,\nsummary: \"Customer is experiencing difficulties logging into their account and requires assistance.\"\n}\n\nEmail Subject: {{receiveCustomerEmail.subject}}\nEmail Body: {{receiveCustomerEmail.body}}\n\nReturn ONLY the JSON object ready to run without any additional text or explanation.",
        "maxTokens": "300",
        "temperature": "0.3"
      },
      "description": "This action node uses a large language model (LLM) to generate text based on a given prompt or input. Returns a generated text string & final token count integer.",
      "outputs": { "generatedText": "", "tokenCount": 0, "error": "" }
    },
    {
      "id": "generateTicket",
      "text": "Generate Ticket",
      "x": 240,
      "y": 288,
      "isEditing": false,
      "type": "execute-javascript",
      "icon": "javascript",
      "category": "utility",
      "isSelected": false,
      "parameters": {
        "code": "const ticketInfo = {{analyzeEmailContent.generatedText}};\nconst ticketNumber = 'TKT-' + Date.now().toString(36).toUpperCase();\nconst ticket = {\n    number: ticketNumber,\n    category: ticketInfo.category,\n    priority: ticketInfo.priority,\n    summary: ticketInfo.summary,\n    status: 'Open',\n    createdAt: new Date().toISOString(),\n    customerEmail: '{{receiveCustomerEmail.from}}',\n    subject: '{{receiveCustomerEmail.subject}}',\n    body: `{{receiveCustomerEmail.body}}`\n};\nreturn { ticketNumber, ticket };"
      },
      "description": "This utility node allows you to execute custom JavaScript code within the workflow, enabling advanced logic and data transformations.",
      "outputs": { "result": null, "error": "" }
    },
    {
      "id": "generateCustomerResponse",
      "text": "Generate Customer Response",
      "x": 240,
      "y": 368,
      "isEditing": false,
      "type": "generate-with-ai-llm",
      "icon": "magic",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "provider": "Anthropic",
        "model": "claude-3-haiku-20240307",
        "prompt": "Instructions:\nYour name is Albert, and you are a helpful AGNT customer support rep. Please generate a polite, helpful, and detailed introductory response to the customer acknowledging their support request. \n\nComplete Ticket Details:\n{{generateTicket.result.ticket}}\n\nInclude the following information in your response:\n1. Ticket number: {{generateTicket.result.ticketNumber}}\n2. Introduce yourself + Brief acknowledgment of their issue\n3. Choose an estimated response time based on this tickets priority level: {{generateTicket.result.ticket.priority}}\n(Priority 1-2 = 4 hours, Priority 3-4 = 24 hours, Priority 5 = 48 hours) - Choose the most appropriate time estimate based on the priority level.\n4/ Generate a few potential common solutions in detail to their issue that may solve the problem before the custom support arrives.\n5. Thank them for their patience\n\nUse a friendly, professional tone. Address the customer by first name in your response if it is available. Keep the response detailed yet concise, under 250 words.\n\nRETURN ONLY THE FINAL RESPONSE EMAIL MESSAGE IN DETAIL READY TO SEND VIA EMAIL WITH NO EXPLANATION, ADDITIONAL, OR OMITTED TEXT.",
        "maxTokens": "300",
        "temperature": "0.3"
      },
      "description": "This action node uses a large language model (LLM) to generate text based on a given prompt or input. Returns a generated text string & final token count integer.",
      "outputs": { "generatedText": "", "tokenCount": 0, "error": "" }
    },
    {
      "id": "sendCustomerResponse",
      "text": "Send Customer Response",
      "x": 240,
      "y": 448,
      "isEditing": false,
      "type": "send-email",
      "icon": "outbox",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "to": "{{receiveCustomerEmail.from}}",
        "subject": "Re: {{receiveCustomerEmail.subject}} [{{generateTicket.result.ticketNumber}}]",
        "body": "{{generateCustomerResponse.generatedText}}",
        "isHtml": false,
        "attachments": []
      },
      "description": "This action node sends an email to a specified recipient with a customizable subject and body.",
      "outputs": { "success": false, "messageId": "", "error": null }
    },
    {
      "id": "generateInternalSummary",
      "text": "Generate Internal Summary",
      "x": 240,
      "y": 528,
      "isEditing": false,
      "type": "generate-with-ai-llm",
      "icon": "magic",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "provider": "Anthropic",
        "model": "claude-3-haiku-20240307",
        "prompt": "Generate a concise internal summary of the support ticket for the support team. \n\nInclude:\n\n1. Ticket number: {{generateTicket.result.ticketNumber}}\n2. Category: {{generateTicket.result.ticket.category}}\n3. Priority: {{generateTicket.result.ticket.priority}}\n4. Customer email: {{generateTicket.result.ticket.customerEmail}}\n5. Summary: {{generateTicket.result.ticket.summary}}\n\nKeep it brief and professional, highlighting key points for quick understanding. Max 100 words.",
        "maxTokens": "300",
        "temperature": "0.3"
      },
      "description": "This action node uses a large language model (LLM) to generate text based on a given prompt or input. Returns a generated text string & final token count integer.",
      "outputs": { "generatedText": "", "tokenCount": 0, "error": "" }
    },
    {
      "id": "sendInternalEmail",
      "text": "Send Internal Email",
      "x": 240,
      "y": 608,
      "isEditing": false,
      "type": "send-email",
      "icon": "outbox",
      "category": "action",
      "isSelected": false,
      "parameters": {
        "to": "admin@bizop.io",
        "subject": "New Support Ticket: {{generateTicket.result.ticketNumber}} - {{generateTicket.result.ticket.category}}",
        "body": "{{generateInternalSummary.generatedText}}\n\nOriginal Email:\n\nSubject: {{receiveCustomerEmail.subject}}\nBody: {{receiveCustomerEmail.body}}",
        "isHtml": false,
        "attachments": []
      },
      "description": "This action node sends an email to a specified recipient with a customizable subject and body.",
      "outputs": { "success": false, "messageId": "", "error": null }
    },
    {
      "id": "d23fe1a2-d150-4345-ae8a-3589adda281c",
      "text": "Customer Support System",
      "x": 240,
      "y": 48,
      "isEditing": false,
      "type": "label",
      "icon": "text",
      "category": "utility",
      "isSelected": false,
      "parameters": {},
      "description": "This utility node displays a text label in the workflow, providing additional context or information.",
      "outputs": {}
    }
  ],
  "edges": [
    {
      "id": "1724343756402",
      "start": { "id": "receiveCustomerEmail", "type": "output" },
      "end": { "id": "analyzeEmailContent", "type": "input" },
      "startX": 528,
      "startY": 152,
      "endX": 240,
      "endY": 232
    },
    {
      "id": "1724343807277",
      "start": { "id": "analyzeEmailContent", "type": "output" },
      "end": { "id": "generateTicket", "type": "input" },
      "startX": 528,
      "startY": 232,
      "endX": 240,
      "endY": 312
    },
    {
      "id": "1724343876228",
      "start": { "id": "generateTicket", "type": "output" },
      "end": { "id": "generateCustomerResponse", "type": "input" },
      "startX": 528,
      "startY": 312,
      "endX": 240,
      "endY": 392
    },
    {
      "id": "1724343935867",
      "start": { "id": "generateCustomerResponse", "type": "output" },
      "end": { "id": "sendCustomerResponse", "type": "input" },
      "startX": 528,
      "startY": 392,
      "endX": 240,
      "endY": 472
    },
    {
      "id": "1724344018217",
      "start": { "id": "sendCustomerResponse", "type": "output" },
      "end": { "id": "generateInternalSummary", "type": "input" },
      "startX": 528,
      "startY": 472,
      "endX": 240,
      "endY": 552
    },
    {
      "id": "1724344020367",
      "start": { "id": "generateInternalSummary", "type": "output" },
      "end": { "id": "sendInternalEmail", "type": "input" },
      "startX": 528,
      "startY": 552,
      "endX": 240,
      "endY": 632
    }
  ],
  "zoomLevel": 1,
  "canvasOffsetX": 243,
  "canvasOffsetY": 152,
  "isTinyNodeMode": false
}
